<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>מסנן שורות ריקות והערות</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background-color: #f4f4f9;
    }

    .container {
      max-width: 800px;
      width: 90%;
      padding: 20px;
      background-color: #ffffff;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      position: relative;
    }

    h1 {
      font-size: 24px;
      text-align: center;
    }

    p {
      text-align: center;
      font-size: 16px;
    }

    textarea {
      width: 100%;
      height: 150px;
      margin: 10px 0;
      padding: 10px;
      border-radius: 4px;
      border: 1px solid #ccc;
      resize: none;
    }

    .button-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .button-group button {
      padding: 10px;
      font-size: 16px;
      direction: rtl;
      text-align: center;
      color: #ffffff;
      background-color: #007bff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .button-group button:hover {
      background-color: #0056b3;
    }

    /* עיצוב לחלון הצד */
    .history-sidebar {
      position: fixed;
      top: 0;
      bottom: 0;
      width: 300px;
      background-color: #ffffff;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      overflow-y: auto;
      transition: transform 0.3s ease-in-out;
      z-index: 1000;
    }

    .history-sidebar[dir="ltr"] {
      right: -300px;
      transform: translateX(0);
    }

    .history-sidebar[dir="rtl"] {
      left: -300px;
      transform: translateX(0);
    }

    .history-sidebar.open[dir="ltr"] {
      transform: translateX(-300px);
    }

    .history-sidebar.open[dir="rtl"] {
      transform: translateX(300px);
    }

    .history-sidebar .close-button {
      padding: 10px;
      background-color: #ff6b6b;
      color: white;
      border: none;
      border-radius: 4px;
      margin: 10px;
      cursor: pointer;
    }

    .history-sidebar .close-button:hover {
      background-color: #e63946;
    }

    .history-title {
      font-size: 18px;
      font-weight: bold;
      margin: 10px;
    }

    .history-list {
      list-style: none;
      padding: 0 10px;
    }

    .history-item {
      padding: 10px;
      border-bottom: 1px solid #ddd;
    }

    .history-item:last-child {
      border-bottom: none;
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 20px;
      }

      p {
        font-size: 14px;
      }

      .button-group button {
        font-size: 14px;
        padding: 8px;
      }

      .history-sidebar {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>מסנן שורות ריקות והערות</h1>
    <p>הדבק כאן את הטקסט שלך, ונקה שורות ריקות והערות לפי בחירתך.</p>
    <p>
      Paste your text below, and this tool will help you clean it by removing 
      empty lines and comments. The result will appear in the output box.
    </p>
    
    <!-- תיבת הטקסט הראשונה -->
    <textarea id="inputText" placeholder="הדבק כאן את הטקסט..."></textarea>

    <!-- תיבת הטקסט השנייה -->
    <textarea id="outputText" placeholder="The processed text will appear here..." readonly></textarea>
    
    <!-- כפתורים -->
    <div class="button-group">
      <button onclick="processText('removeComments')">הסר הערות - Remove Comments</button>
      <button onclick="processText('removeEmptyLines')">הסר רווחים ריקים - Remove Empty Lines</button>
      <button onclick="processText('removeAll')">הסר הכל - Remove All</button>
      <button onclick="clearText()">נקה תיבות - Clear Boxes</button>
      <button onclick="copyToClipboard()">העתק ללוח - Copy to Clipboard</button>
      <button onclick="toggleHistory()">הצג היסטוריה - Toggle History</button>
    </div>
  </div>

  <!-- חלון הצד של ההיסטוריה -->
  <div class="history-sidebar" id="historySidebar" dir="rtl">
    <button class="close-button" onclick="toggleHistory()">סגור - Close</button>
    <div class="history-title">היסטוריה:</div>
    <ul class="history-list" id="historyList"></ul>
  </div>

  <script>
    let lastInputText = '';
    
    // טען היסטוריה מ-localStorage
    function loadHistory() {
      const historyList = document.getElementById('historyList');
      const history = JSON.parse(localStorage.getItem('textHistory')) || [];
      historyList.innerHTML = '';
      history.forEach((item) => {
        const li = document.createElement('li');
        li.className = 'history-item';
        li.textContent = item;
        historyList.appendChild(li);
      });
    }

    // הוספת טקסט להיסטוריה
    function addToHistory(text) {
      const history = JSON.parse(localStorage.getItem('textHistory')) || [];
      history.push(text);
      localStorage.setItem('textHistory', JSON.stringify(history));
      loadHistory();
    }

    // הצגת ההיסטוריה/סגירתה
    function toggleHistory() {
      const historySidebar = document.getElementById('historySidebar');
      historySidebar.classList.toggle('open');
    }

    // פונקציות נוספות (זהות לגרסה הקודמת)
    function clearText() {
      document.getElementById('inputText').value = '';
      document.getElementById('outputText').value = '';
    }

    function processText(action) {
      const input = document.getElementById('inputText').value;
      let output = input;

      if (action === 'removeComments') {
        output = output.replace(/\/\/.*|\/\*[\s\S]*?\*\//g, '');
      } else if (action === 'removeEmptyLines') {
        output = output.replace(/^\s*[\r\n]/gm, '');
      } else if (action === 'removeAll') {
        output = output.replace(/\/\/.*|\/\*[\s\S]*?\*\//g, '').replace(/^\s*[\r\n]/gm, '');
      }

      document.getElementById('outputText').value = output;
      addToHistory(input);
    }

    function copyToClipboard() {
      const output = document.getElementById('outputText').value;
      navigator.clipboard.writeText(output).then(() => alert('הטקסט הועתק ללוח!'));
    }

    // טען את ההיסטוריה בתחילת טעינת הדף
    loadHistory();
  </script>
</body>
</html>
